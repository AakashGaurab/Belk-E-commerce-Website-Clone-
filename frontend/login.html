<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olivia Login Page</title>
</head>
<body>
    <div class="log">
        <form action="">
            <label for="email">Email</label>
            <input type="email" id="email" required="required">
            <label for="password">Password</label>
            <input type="password" required="required" id="password">
            <input type="submit">
        </form>
    </div>
</body>
<script>
    document.querySelector(".log form").addEventListener("submit",(event)=>{
        event.preventDefault();
        let input = document.querySelectorAll(".log input");
        let obj={};
        for (let i=0;i<input.length-1;i++){
           obj[input[i].id]=input[i].value;
        }
        backend_log(obj);
    })

    async function backend_log(data){
        let res = await fetch("http://localhost:3500/user/login",{
            method:"POST",
            headers:{
                "Content-Type":"application/json"
            },
            body:JSON.stringify(data)
        });
        let response = await res.json();
        if (response.token!=undefined){
            sessionStorage.setItem("token",response.token);
            alert("Log In Sucesfull")
            window.location.href="product.html";
        }
        else {
            alert("Wrong Credentials")
        }
    }
</script>
</html>